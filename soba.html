<!doctype html>
<html lang="ur" dir="rtl">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ù…Ø¯Ø±Ø³Ûƒ Ø§Ù„Ù…Ø¯ÛŒÙ†Û ÚˆÛŒØ´ Ø¨ÙˆØ±Úˆ</title>
  <style>
    body {
      font-family: "Noto Nastaliq Urdu", "Jameel Noori Nastaleeq", serif;
      background: #eef7f1;
      margin: 0;
      padding: 20px;
    }

    h2 {
      margin-top: 0;
      color: #0b4d3a;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }

    th,
    td {
      border: 1px solid #ccc;
      padding: 8px;
      text-align: center;
    }

    th {
      background: #0b4d3a;
      color: #fff;
    }

    .btn {
      background: #1eae74;
      color: #fff;
      border: none;
      padding: 8px 14px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
    }

    .btn:hover {
      background: #189d68;
    }

    .btn-danger {
      background: #d9534f;
    }

    .btn-danger:hover {
      background: #c9302c;
    }

    .actions {
      display: flex;
      justify-content: flex-start;
      gap: 8px;
      margin-bottom: 10px;
    }

    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background: rgba(0, 0, 0, 0.5);
    }

    .modal-content {
      background: #fff;
      margin: 8% auto;
      padding: 20px;
      border-radius: 10px;
      max-width: 400px;
      direction: rtl;
    }

    .modal-content label {
      display: block;
      margin-top: 8px;
      font-weight: 600;
    }

    .modal-content input {
      width: 100%;
      padding: 6px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }

    .modal-content button {
      margin-top: 10px;
    }

    .close {
      float: left;
      font-size: 20px;
      cursor: pointer;
      color: #444;
    }

    .close:hover {
      color: #000;
    }
  </style>
</head>

<body>
  <div class="container">
    <h2>Ø§ÙÙ„Ù’Ø­ÙÙ…Ù’Ø¯Ù Ù„ÙÙ„Ù‘Ù°ÛÙ Ø±ÙØ¨ÙÙ‘ Ø§Ù„Ù’Ø¹Ù°Ù„ÙÙ…ÙÛŒÙ’Ù†Ù ÙˆÙ Ø§Ù„ØµÙÙ‘Ù„Ù°ÙˆÛƒÙ ÙˆÙØ§Ù„Ø³ÙÙ‘Ù„ÙØ§Ù…Ù Ø¹Ù„Ù°ÛŒ Ø³ÙÛŒÙÙ‘Ø¯Ù Ø§Ù„Ù’Ù…ÙØ±Ù’Ø³ÙÙ„ÙÛŒÙ’Ù†Ù Ø· Ø§ÙÙ…ÙÙ‘Ø§ Ø¨ÙØ¹Ù’Ø¯Ù
      ÙÙØ§ÙØ¹ÙÙˆÙ’Ø°Ù Ø¨ÙØ§Ù„Ù„Ù‘Ù°Ù‡Ù Ù…ÙÙ†Ù Ø§Ù„Ø´ÙÙ‘ÛŒÙ’Ø·Ù°Ù†Ù Ø§Ù„Ø±ÙÙ‘Ø¬ÙÛŒÙ’Ù…Ù Ø· Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„Ù‘Ù°Ù‡Ù Ø§Ù„Ø±ÙÙ‘Ø­Ù’Ù…Ù°Ù†Ù Ø§Ù„Ø±ÙÙ‘Ø­ÙÛŒÙ’Ù…Ù Ø·</h2>
    <h3>ØµÙˆØ¨Û</h3>
    <hr>
  </div>

  <div class="actions">
    <button class="btn" onclick="openModal()">+ Ù†ÛŒÙˆ Ø´Ù…ÙˆÙ„ÛŒØª</button>
    <button class="btn" style="background:#2a8fe7;" onclick="goBack()"> Back Page</button>
  </div>

  <table id="provinceTable">
    <thead>
      <tr>
        <th>Ù†Ù…Ø¨Ø±</th>
        <th>ØµÙˆØ¨Û Ù†Ø§Ù…</th>
        <th>Ø±ÛŒØ¬Ù†</th>
        <th>ÚˆÙˆÛŒÚ˜Ù†</th>
        <th>Ú©Ø§Ø¨ÛŒÙ†Û</th>
        <th>ÙØ¹Ø§Ù„</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <!-- ğŸ”¹ Modal Form -->
  <div id="addModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal()">&times;</span>
      <h3>Ù†ÛŒØ§ ØµÙˆØ¨Û Ø´Ø§Ù…Ù„ Ú©Ø±ÛŒÚº</h3>
      <label>ØµÙˆØ¨Û Ù†Ø§Ù…</label>
      <input type="text" id="provinceName" placeholder="Ù…Ø«Ù„Ø§Ù‹: Ø³Ù†Ø¯Ú¾" />
      <label>Ø±ÛŒØ¬Ù†</label>
      <input type="text" id="regionName" placeholder="Ø±ÛŒØ¬Ù† Ø¯Ø±Ø¬ Ú©Ø±ÛŒÚº" />
      <label>ÚˆÙˆÛŒÚ˜Ù†</label>
      <input type="text" id="divisionName" placeholder="ÚˆÙˆÛŒÚ˜Ù† Ø¯Ø±Ø¬ Ú©Ø±ÛŒÚº" />
      <label>Ú©Ø§Ø¨ÛŒÙ†Û</label>
      <input type="text" id="kabinaName" placeholder="Ú©Ø§Ø¨ÛŒÙ†Û Ø¯Ø±Ø¬ Ú©Ø±ÛŒÚº" />
      <button class="btn" onclick="saveProvince()">Ù…Ø­ÙÙˆØ¸ Ú©Ø±ÛŒÚº</button>
    </div>
  </div>

  <script>
    const modal = document.getElementById('addModal');
    const tableBody = document.querySelector('#provinceTable tbody');

    // ğŸŸ¢ Modal Controls
    function openModal() { modal.style.display = 'block'; }
    function closeModal() { modal.style.display = 'none'; }
    window.onclick = e => { if (e.target == modal) closeModal(); }

    // ğŸŸ¢ Load Saved Provinces
    document.addEventListener("DOMContentLoaded", loadProvinces);

    function loadProvinces() {
      const provinces = JSON.parse(localStorage.getItem("provinces")) || [];
      tableBody.innerHTML = "";
      provinces.forEach((p, i) => {
        const row = tableBody.insertRow();
        row.insertCell(0).textContent = i + 1;
        row.insertCell(1).textContent = p.name;
        row.insertCell(2).textContent = p.region;
        row.insertCell(3).textContent = p.division;
        row.insertCell(4).textContent = p.kabina;
        const actions = row.insertCell(5);
        actions.innerHTML = `<button class="btn-danger" onclick="deleteProvince(${i})">âŒ Ø­Ø°Ù</button>`;
      });
    }

    // ğŸŸ¢ Save Province
    function saveProvince() {
      const name = document.getElementById('provinceName').value.trim();
      const region = document.getElementById('regionName').value.trim();
      const division = document.getElementById('divisionName').value.trim();
      const kabina = document.getElementById('kabinaName').value.trim();

      if (!name) { alert('Ø¨Ø±Ø§Û Ú©Ø±Ù… ØµÙˆØ¨Û Ú©Ø§ Ù†Ø§Ù… Ø¯Ø±Ø¬ Ú©Ø±ÛŒÚºÛ”'); return; }

      const provinces = JSON.parse(localStorage.getItem("provinces")) || [];
      provinces.push({ name, region, division, kabina });
      localStorage.setItem("provinces", JSON.stringify(provinces));

      loadProvinces();
      closeModal();

      // clear inputs
      document.getElementById('provinceName').value = '';
      document.getElementById('regionName').value = '';
      document.getElementById('divisionName').value = '';
      document.getElementById('kabinaName').value = '';
    }

    // ğŸŸ¢ Delete Province
    function deleteProvince(index) {
      if (confirm("Ú©ÛŒØ§ Ø¢Ù¾ ÙˆØ§Ù‚Ø¹ÛŒ Ø§Ø³ ØµÙˆØ¨Û’ Ú©Ùˆ Ø­Ø°Ù Ú©Ø±Ù†Ø§ Ú†Ø§ÛØªÛ’ ÛÛŒÚºØŸ")) {
        const provinces = JSON.parse(localStorage.getItem("provinces")) || [];
        provinces.splice(index, 1);
        localStorage.setItem("provinces", JSON.stringify(provinces));
        loadProvinces();
      }
    }

    // ğŸŸ¢ Back Button Function
    function goBack() {
      window.history.back();
    }
  </script>
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-app.js";
import { getDatabase, ref, push, onValue } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-database.js";

// ğŸ”¹ Ø¢Ù¾ Ú©Ø§ Firebase Config
const firebaseConfig = {
  apiKey: "AIzaSyAU6SfN6rrMdxVe4V3TW6DHvx0wl-W0MP4",
  authDomain: "mtm-final-exam.firebaseapp.com",
  databaseURL: "https://mtm-final-exam-default-rtdb.firebaseio.com",
  projectId: "mtm-final-exam",
  storageBucket: "mtm-final-exam.firebasestorage.app",
  messagingSenderId: "600001694891",
  appId: "1:600001694891:web:cf235c6c4a77d5a093fbee",
  measurementId: "G-GCLYLJ9FWC"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

window.db = db; // ØªØ§Ú©Û Ø¨Ø§Ù‚ÛŒ HTML Ù…ÛŒÚº use ÛÙˆ Ø³Ú©Û’
window.ref = ref;
window.push = push;
window.onValue = onValue;
  </script>
</body>

</html>