<!doctype html>
<html lang="ur" dir="rtl">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>مدرسۃ المدینہ ڈیش بورڈ</title>
  <style>
    body {
      font-family: "Noto Nastaliq Urdu", "Jameel Noori Nastaleeq", serif;
      background: #eef7f1;
      margin: 0;
      padding: 20px;
    }

    h2 {
      margin-top: 0;
      color: #0b4d3a;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }

    th,
    td {
      border: 1px solid #ccc;
      padding: 8px;
      text-align: center;
    }

    th {
      background: #0b4d3a;
      color: #fff;
    }

    .btn {
      background: #1eae74;
      color: #fff;
      border: none;
      padding: 8px 14px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
    }

    .btn:hover {
      background: #189d68;
    }

    .btn-danger {
      background: #d9534f;
    }

    .btn-danger:hover {
      background: #c9302c;
    }

    .actions {
      display: flex;
      justify-content: flex-start;
      gap: 8px;
      margin-bottom: 10px;
    }

    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background: rgba(0, 0, 0, 0.5);
    }

    .modal-content {
      background: #fff;
      margin: 8% auto;
      padding: 20px;
      border-radius: 10px;
      max-width: 400px;
      direction: rtl;
    }

    .modal-content label {
      display: block;
      margin-top: 8px;
      font-weight: 600;
    }

    .modal-content input {
      width: 100%;
      padding: 6px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }

    .modal-content button {
      margin-top: 10px;
    }

    .close {
      float: left;
      font-size: 20px;
      cursor: pointer;
      color: #444;
    }

    .close:hover {
      color: #000;
    }
  </style>
</head>

<body>
  <div class="container">
    <h2>اَلْحَمْدُ لِلّٰہِ رَبِّ الْعٰلَمِیْنَ وَ الصَّلٰوۃُ وَالسَّلَامُ علٰی سَیِّدِ الْمُرْسَلِیْنَ ط اَمَّا بَعْدُ
      فَاَعُوْذُ بِاللّٰهِ مِنَ الشَّیْطٰنِ الرَّجِیْمِ ط بِسْمِ اللّٰهِ الرَّحْمٰنِ الرَّحِیْمِ ط</h2>
    <h3>صوبہ</h3>
    <hr>
  </div>

  <div class="actions">
    <button class="btn" onclick="openModal()">+ نیو شمولیت</button>
    <button class="btn" style="background:#2a8fe7;" onclick="goBack()"> Back Page</button>
  </div>

  <table id="provinceTable">
    <thead>
      <tr>
        <th>نمبر</th>
        <th>صوبہ نام</th>
        <th>ریجن</th>
        <th>ڈویژن</th>
        <th>کابینہ</th>
        <th>فعال</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <!-- 🔹 Modal Form -->
  <div id="addModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal()">&times;</span>
      <h3>نیا صوبہ شامل کریں</h3>
      <label>صوبہ نام</label>
      <input type="text" id="provinceName" placeholder="مثلاً: سندھ" />
      <label>ریجن</label>
      <input type="text" id="regionName" placeholder="ریجن درج کریں" />
      <label>ڈویژن</label>
      <input type="text" id="divisionName" placeholder="ڈویژن درج کریں" />
      <label>کابینہ</label>
      <input type="text" id="kabinaName" placeholder="کابینہ درج کریں" />
      <button class="btn" onclick="saveProvince()">محفوظ کریں</button>
    </div>
  </div>

  <script>
    const modal = document.getElementById('addModal');
    const tableBody = document.querySelector('#provinceTable tbody');

    // 🟢 Modal Controls
    function openModal() { modal.style.display = 'block'; }
    function closeModal() { modal.style.display = 'none'; }
    window.onclick = e => { if (e.target == modal) closeModal(); }

    // 🟢 Load Saved Provinces
    document.addEventListener("DOMContentLoaded", loadProvinces);

    function loadProvinces() {
      const provinces = JSON.parse(localStorage.getItem("provinces")) || [];
      tableBody.innerHTML = "";
      provinces.forEach((p, i) => {
        const row = tableBody.insertRow();
        row.insertCell(0).textContent = i + 1;
        row.insertCell(1).textContent = p.name;
        row.insertCell(2).textContent = p.region;
        row.insertCell(3).textContent = p.division;
        row.insertCell(4).textContent = p.kabina;
        const actions = row.insertCell(5);
        actions.innerHTML = `<button class="btn-danger" onclick="deleteProvince(${i})">❌ حذف</button>`;
      });
    }

    // 🟢 Save Province
    function saveProvince() {
      const name = document.getElementById('provinceName').value.trim();
      const region = document.getElementById('regionName').value.trim();
      const division = document.getElementById('divisionName').value.trim();
      const kabina = document.getElementById('kabinaName').value.trim();

      if (!name) { alert('براہ کرم صوبہ کا نام درج کریں۔'); return; }

      const provinces = JSON.parse(localStorage.getItem("provinces")) || [];
      provinces.push({ name, region, division, kabina });
      localStorage.setItem("provinces", JSON.stringify(provinces));

      loadProvinces();
      closeModal();

      // clear inputs
      document.getElementById('provinceName').value = '';
      document.getElementById('regionName').value = '';
      document.getElementById('divisionName').value = '';
      document.getElementById('kabinaName').value = '';
    }

    // 🟢 Delete Province
    function deleteProvince(index) {
      if (confirm("کیا آپ واقعی اس صوبے کو حذف کرنا چاہتے ہیں؟")) {
        const provinces = JSON.parse(localStorage.getItem("provinces")) || [];
        provinces.splice(index, 1);
        localStorage.setItem("provinces", JSON.stringify(provinces));
        loadProvinces();
      }
    }

    // 🟢 Back Button Function
    function goBack() {
      window.history.back();
    }
  </script>
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-app.js";
import { getDatabase, ref, push, onValue } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-database.js";

// 🔹 آپ کا Firebase Config
const firebaseConfig = {
  apiKey: "AIzaSyAU6SfN6rrMdxVe4V3TW6DHvx0wl-W0MP4",
  authDomain: "mtm-final-exam.firebaseapp.com",
  databaseURL: "https://mtm-final-exam-default-rtdb.firebaseio.com",
  projectId: "mtm-final-exam",
  storageBucket: "mtm-final-exam.firebasestorage.app",
  messagingSenderId: "600001694891",
  appId: "1:600001694891:web:cf235c6c4a77d5a093fbee",
  measurementId: "G-GCLYLJ9FWC"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

window.db = db; // تاکہ باقی HTML میں use ہو سکے
window.ref = ref;
window.push = push;
window.onValue = onValue;
  </script>
</body>

</html>